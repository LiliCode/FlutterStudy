# 类

dart 是基于 `mixin` 继承机制的面向对象语言，所有对象都是继承自一个类的实例，除了 Null 以外的所有类都是继承自 Object 类。

## 类的成员

对象的成员是由函数和数据组成。方法的调用是通过对象来完成，这种方式可以访问对象的函数和数据。

使用（.）语法来访问成员变量，如下所示

```dart
class Point {
  double? x;
  double? y;
}

var p = Point();
p.x = 2;
p.y = 8;
```

使用 ?. 代替 . 可以避免左边对象为空导致的崩溃，如下所示

```dart
var a = p?.x;
```

## 使用构造函数

使用`构造函数`创建一个对象。构造函数的命名方式可以为`类名`，或者`类名.标识符`的形式。如下所示

上边的类可以这么改写

```dart
class Point {
  double? x;
  double? y;

  Point({this.x, this.y});

  Point.fromJson(Map<String, dynamic>? json) {
    this.x = json?['x'] ?? 0;
    this.y = json?['y'] ?? 0;
  }
}

var p0 = Point(x: 9, y: 20);
var p1 = Point.fromJson({'x': 10, 'y': 50});
```

上面使用了 Point() 和 Point.fromJson() 构造函数来创建对象。

## 获取对象的类型

可以使用 Object 对象的 `runtimeType` 属性在运行时获取一个对象的类型，该对象类型是 Type 的实例。

```dart
print(p.runtimeType);
```

打印上面的对象 p 的类型，结果：Point

## 实例变量

上面 Point 类中，所有为初始化的实例变量的值均为 null。

所有的实例变量均会隐式地声明一个 Getter 方法，非终值的实例变量和 late final 声明但未声明初始化的实例变量还会隐式地声明一个 Setter 方法。

如果你在实例变量中声明了没有 `late` 修饰的变量，他会在实例初始化是早于构造方法进行复制。因此没有使用 `late` 修饰的变量无法访问 `this。`

## 构造函数

声明一个与类名一样的函数即可声明一个构造函数。大部分的构造函数是生成式构造函数，起用于创建一个实例。（详见上面使用构造函数章节）

使用 `this` 关键字引用当前对象

## 默认构造函数

如果你没有声明构造函数，那么 dart 会自动生成一个无参数的构造函数并且该构造函数会调用父类默认的构造函数。

如下所示

```dart
class Size {
  double? widht;
  double? height;
}

// 没有声明构造函数，使用默认的构造函数
var s = Size();
s.widht = 100;
s.height = 200;
```

## 构造函数不会被继承

子类不会继承父类的构造函数，如果子类没有声明构造函数，那么只会有一个默认的无参数构造函数。

## 命名构造函数

可以为一个类声明多个命名构造函数来表达更加明确的意图

```dart
class Point {
  double? x;
  double? y;

  // 命名构造函数
  Point.origin() {
    this.x = 0;
    this.y = 0;
  }
}
```

dart 中构造函数不能被继承，命名构造函数也不能被继承。如果你想在子类中提供一个与父类命名构造函数一样的命名构造函数，则需要在子类中显示声明。

